"use strict";(self.webpackChunkfana_docs=self.webpackChunkfana_docs||[]).push([[127],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),h=i,k=u["".concat(s,".").concat(h)]||u[h]||d[h]||o;return n?a.createElement(k,r(r({ref:t},p),{},{components:n})):a.createElement(k,r({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},981:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));const o={id:"react-sdk-reference"},r="React SDK Reference",l={unversionedId:"sdk/react-sdk-reference",id:"sdk/react-sdk-reference",title:"React SDK Reference",description:"The React SDK exports four pieces of functionality:",source:"@site/docs/sdk/react-sdk-reference.md",sourceDirName:"sdk",slug:"/sdk/react-sdk-reference",permalink:"/fana-docs/docs/sdk/react-sdk-reference",draft:!1,editUrl:"https://github.com/fana-io/fana-docs/docs/sdk/react-sdk-reference.md",tags:[],version:"current",frontMatter:{id:"react-sdk-reference"},sidebar:"docs",previous:{title:"Using the React SDK",permalink:"/fana-docs/docs/sdk/using-react-sdk"},next:{title:"Using the Node SDK",permalink:"/fana-docs/docs/sdk/using-node-sdk"}},s={},c=[{value:"<code>FanaConfig</code>",id:"fanaconfig",level:2},{value:"<code>FanaConfig</code> Constructor Parameters:",id:"fanaconfig-constructor-parameters",level:3},{value:"<code>FanaConfig</code> Instance Methods:",id:"fanaconfig-instance-methods",level:3},{value:"<code>FanaConfig.prototype.connect()</code>",id:"fanaconfigprototypeconnect",level:4},{value:"<code>FanaClient</code>",id:"fanaclient",level:2},{value:"<code>FanaClient</code> Constructor Parameters:",id:"fanaclient-constructor-parameters",level:3},{value:"<code>FanaClient</code> Instance Methods:",id:"fanaclient-instance-methods",level:3},{value:"<code>FanaClient.prototype.evaluateFlag(flagKey, defaultValue)</code>",id:"fanaclientprototypeevaluateflagflagkey-defaultvalue",level:4},{value:"<code>FanaClient.prototype.getEvals()</code>",id:"fanaclientprototypegetevals",level:4},{value:"<code>FanaClient.prototype.setEval(newEval)</code>",id:"fanaclientprototypesetevalneweval",level:4},{value:"<code>FanaProvider</code> and <code>FanaContext</code>",id:"fanaprovider-and-fanacontext",level:2}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"react-sdk-reference"},"React SDK Reference"),(0,i.kt)("p",null,"The React SDK exports four pieces of functionality:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FanaConfig")," class"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FanaClient")," class"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FanaProvider")," React component"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FanaContext")," React context")),(0,i.kt)("h2",{id:"fanaconfig"},(0,i.kt)("inlineCode",{parentName:"h2"},"FanaConfig")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaConfig")," class is used to instantiate a ",(0,i.kt)("inlineCode",{parentName:"p"},"config")," object which is the first step to getting set up with the React SDK."),(0,i.kt)("h3",{id:"fanaconfig-constructor-parameters"},(0,i.kt)("inlineCode",{parentName:"h3"},"FanaConfig")," Constructor Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sdkKey"),": Expects a ",(0,i.kt)("strong",{parentName:"li"},"string")," representing your React SDK key. This is provided in the Dashboard's Settings page."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"bearerAddress"),": Expects a ",(0,i.kt)("strong",{parentName:"li"},"string")," representing the address where the Flag Bearer is being hosted."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"userContext"),": Expects an ",(0,i.kt)("strong",{parentName:"li"},"object")," containing the attributes pertaining to a user or session.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{ userId: 'jjuy', beta: true, state: 'CA' }")),(0,i.kt)("li",{parentName:"ul"},"This is an example. The attributes you provide will be dependent on your setup.")))),(0,i.kt)("h3",{id:"fanaconfig-instance-methods"},(0,i.kt)("inlineCode",{parentName:"h3"},"FanaConfig")," Instance Methods:"),(0,i.kt)("h4",{id:"fanaconfigprototypeconnect"},(0,i.kt)("inlineCode",{parentName:"h4"},"FanaConfig.prototype.connect()")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Instantiates a ",(0,i.kt)("inlineCode",{parentName:"li"},"FanaClient")," instance"),(0,i.kt)("li",{parentName:"ol"},"Asynchronously invokes and awaits the new client instance's ",(0,i.kt)("inlineCode",{parentName:"li"},"getEvals")," method"),(0,i.kt)("li",{parentName:"ol"},"Returns the client instance object")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Note that this method is automatically invoked when the ",(0,i.kt)("inlineCode",{parentName:"li"},"FanaProvider")," component is passed the ",(0,i.kt)("inlineCode",{parentName:"li"},"config")," prop. You will not need to invoke ",(0,i.kt)("inlineCode",{parentName:"li"},"FanaConfig.prototype.connect()")," yourself.")),(0,i.kt)("h2",{id:"fanaclient"},(0,i.kt)("inlineCode",{parentName:"h2"},"FanaClient")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaClient")," class instantiates an object responsible for holding flag evaluation data and providing the essential ",(0,i.kt)("inlineCode",{parentName:"p"},"evaluateFlags()")," method."),(0,i.kt)("h3",{id:"fanaclient-constructor-parameters"},(0,i.kt)("inlineCode",{parentName:"h3"},"FanaClient")," Constructor Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"config"),": Expects a ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"FanaConfig")," instance"),"."),(0,i.kt)("li",{parentName:"ul"},"Note that ",(0,i.kt)("inlineCode",{parentName:"li"},"FanaConfig.prototype.connect()")," automatically instantiates the client instance for you, so you needn't do this yourself.")),(0,i.kt)("h3",{id:"fanaclient-instance-methods"},(0,i.kt)("inlineCode",{parentName:"h3"},"FanaClient")," Instance Methods:"),(0,i.kt)("h4",{id:"fanaclientprototypeevaluateflagflagkey-defaultvalue"},(0,i.kt)("inlineCode",{parentName:"h4"},"FanaClient.prototype.evaluateFlag(flagKey, defaultValue)")),(0,i.kt)("p",null,"This method takes two arguments:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flagKey"),": Expects a ",(0,i.kt)("strong",{parentName:"li"},"string")," representing the key of the flag that you wish to evaluate."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"defaultValue"),": Expects a ",(0,i.kt)("strong",{parentName:"li"},"boolean")," representing what the evaluation should be in cases where flag data is unavailable, or the provided ",(0,i.kt)("inlineCode",{parentName:"li"},"flagKey")," is invalid. This is optional and is ",(0,i.kt)("inlineCode",{parentName:"li"},"false")," by default.")),(0,i.kt)("p",null,"This method returns ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," based on the evaluation data held in the client instance."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The below methods are called automatically and are only here for reference. You needn't invoke these.")),(0,i.kt)("h4",{id:"fanaclientprototypegetevals"},(0,i.kt)("inlineCode",{parentName:"h4"},"FanaClient.prototype.getEvals()")),(0,i.kt)("p",null,"This method sends the User Context object to the Flag Bearer in a POST request. The Flag Bearer then evaluates all flags based on the provided User Context, and returns an object containing those evaluations. The client instance then stores it in its ",(0,i.kt)("inlineCode",{parentName:"p"},"evals")," instance property."),(0,i.kt)("p",null,"This method is automatically invoked during ",(0,i.kt)("inlineCode",{parentName:"p"},"Config.prototype.connect()"),"."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"It's important that the React SDK Client never has access to the raw ruleset since it can contain sensitive user information. This is why the Flag Bearer pre-evaluate all flags before sending any data to the client.")),(0,i.kt)("h4",{id:"fanaclientprototypesetevalneweval"},(0,i.kt)("inlineCode",{parentName:"h4"},"FanaClient.prototype.setEval(newEval)")),(0,i.kt)("p",null,"This method simply updates the client instance's ",(0,i.kt)("inlineCode",{parentName:"p"},"evals")," instance property with new evaluation data. This occurs when updates are streamed via the SSE connection with the Flag Bearer."),(0,i.kt)("h2",{id:"fanaprovider-and-fanacontext"},(0,i.kt)("inlineCode",{parentName:"h2"},"FanaProvider")," and ",(0,i.kt)("inlineCode",{parentName:"h2"},"FanaContext")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"FanaProvider")," is a React Component that you use to wrap your other app components. It provides access to the ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaContext")," for all of your React components, allowing you to use the client instance's ",(0,i.kt)("inlineCode",{parentName:"p"},"evaluateFlag()")," method anywhere."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaProvider")," component takes a ",(0,i.kt)("inlineCode",{parentName:"p"},"config")," prop where you should pass your initialized ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaConfig")," instance. It will then take care of setting up the ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaClient")," instance based on the ",(0,i.kt)("inlineCode",{parentName:"p"},"config")," settings. It also creates a React Context (holding the client instance object), which you can access via the ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaContext")," export."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaProvider")," component also sets up an ",(0,i.kt)("inlineCode",{parentName:"p"},"EventSource")," with the Flag Bearer to allow for real-time flag updates."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Currently, only flags being toggled OFF will be streamed in real time. If the user refreshes the page, however, the SDK instance will be reinitialized with all of the latest updates.")),(0,i.kt)("p",null,"To get access to the client instance's ",(0,i.kt)("inlineCode",{parentName:"p"},"evaluateFlag()")," method in your components, simply use React's ",(0,i.kt)("inlineCode",{parentName:"p"},"useContext")," hook and supply it with the ",(0,i.kt)("inlineCode",{parentName:"p"},"FanaContext")," imported from the Fana React SDK. This will return the client instance object with access to the ",(0,i.kt)("inlineCode",{parentName:"p"},"evaluateFlag()")," method."),(0,i.kt)("p",null,"For code examples, see the section on ",(0,i.kt)("a",{parentName:"p",href:"/fana-docs/docs/sdk/using-react-sdk"},"Using the React SDK"),"."))}d.isMDXComponent=!0}}]);